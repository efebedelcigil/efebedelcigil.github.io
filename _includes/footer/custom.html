<script>
document.addEventListener("DOMContentLoaded", function() {
  
  // 1. GÖREV: Dış Linkleri Yeni Sekmede Açma
  var links = document.links;
  for (var i = 0; i < links.length; i++) {
    if (links[i].hostname != window.location.hostname) {
      links[i].target = '_blank';
      links[i].rel = 'noopener noreferrer';
    } else if (links[i].href.endsWith(".pdf")) {
      links[i].target = '_blank';
    }
  }

  // 2. GÖREV: Akıllı Dil Değiştirici (Context-Aware Switcher)
  // Şu anki sayfanın adresini al (Örn: /tr/cv/ veya /en/projects/)
  var currentPath = window.location.pathname;
  
  // Menüdeki tüm linkleri tara
  var navLinks = document.querySelectorAll('.nav__list-item a');

  navLinks.forEach(function(link) {
    var href = link.getAttribute('href');

    // Senaryo A: Kullanıcı TR sayfasında, "English" butonunu arıyor
    // (Link hedefi "/en/" olan butonu bul ve güncelle)
    if (href === '/en/' && currentPath.includes('/tr/')) {
      var newPath = currentPath.replace('/tr/', '/en/');
      link.setAttribute('href', newPath);
    }

    // Senaryo B: Kullanıcı EN sayfasında, "Türkçe" butonunu arıyor
    // (Link hedefi "/tr/" olan butonu bul ve güncelle)
    else if (href === '/tr/' && currentPath.includes('/en/')) {
      var newPath = currentPath.replace('/en/', '/tr/');
      link.setAttribute('href', newPath);
    }
  });

});
</script>