<script>
document.addEventListener("DOMContentLoaded", function() {

  // 1. STANDART İŞLER (PDF vs.)
  var links = document.links;
  for (var i = 0; i < links.length; i++) {
    if (links[i].hostname != window.location.hostname) {
      links[i].target = '_blank';
      links[i].rel = 'noopener noreferrer';
    } else if (links[i].href.endsWith(".pdf")) {
      links[i].target = '_blank';
    }
  }

  // 2. KESİN ÇÖZÜM: GLOBAL VERİ KULLANARAK LİNK DEĞİŞTİRME
  
  // Eğer sayfada lang_ref tanımlıysa (Head kısmından veri geldiyse)
  if (window.currentPage && window.currentPage.id) {
    
    var targetUrl = "";
    
    // Listeyi tara, benim ID'me sahip ama DİLİ farklı olanı bul
    for (var i = 0; i < window.sitePages.length; i++) {
      var p = window.sitePages[i];
      if (p.id === window.currentPage.id && p.lang !== window.currentPage.lang) {
        targetUrl = p.url;
        break; // Buldum, döngüden çık
      }
    }

    // Hedef link bulunduysa butonları güncelle
    if (targetUrl !== "") {
      
      // TR sayfasındaysak -> İngilizce butonunu (href="/en/") güncelle
      if (window.currentPage.lang === 'tr') {
        var enBtn = document.querySelector('a[href="/en/"]');
        // Slash olup olmamasına takılmaması için alternatif seçici:
        if (!enBtn) enBtn = document.querySelector('a[href="en/"]');
        
        if (enBtn) enBtn.setAttribute('href', targetUrl);
      } 
      
      // EN sayfasındaysak -> Türkçe butonunu (href="/tr/") güncelle
      else if (window.currentPage.lang === 'en') {
        var trBtn = document.querySelector('a[href="/tr/"]');
        if (!trBtn) trBtn = document.querySelector('a[href="tr/"]');
        
        if (trBtn) trBtn.setAttribute('href', targetUrl);
      }
    }
  }

});
</script>