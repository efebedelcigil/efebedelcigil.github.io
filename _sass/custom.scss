/*   0. PRELOADER (Animasyon Zıplamasını Kesin Engelleme)
   -------------------------------------------------------------------------- */
/* HTML veya Body'de preload varsa tüm animasyonları durdur */
.preload, 
.preload *, 
.preload *::before, 
.preload *::after {
  transition: none !important;
  animation: none !important;
}

/* --------------------------------------------------------------------------
   1. ROBUST GRID SYSTEM
   -------------------------------------------------------------------------- */
.robust-grid-container {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 25px;
  margin-top: 30px;
  margin-bottom: 30px;

  .feature__item {
    margin: 0 !important; padding: 0 !important;
    max-width: 100% !important; flex: none !important;

    .archive__item {
      height: 100%;
      border: 1px solid #e1e4e8;
      border-radius: 8px;
      padding: 20px;
      background: #fff;
      display: flex; flex-direction: column; align-items: center;
      transition: box-shadow 0.3s ease, background-color 0.3s ease;
      
      &:hover { box-shadow: 0 10px 20px rgba(0,0,0,0.1); }
    }
    .archive__item-teaser { margin-bottom: 15px; i { color: #0056b3; } }
    .archive__item-title { text-align: center; font-size: 1.1em; margin-bottom: 15px; width: 100%; }
    .archive__item-body { width: 100%; text-align: center; }
  }
}

/* --------------------------------------------------------------------------
   2. YAN MENÜ & NAVIGASYON
   -------------------------------------------------------------------------- */
.sidebar {
    border: 1px solid transparent; 
    border-radius: 4px; padding: 1em;
    transition: background-color 0.3s ease, border-color 0.3s ease;
}

.masthead {
  position: -webkit-sticky; position: sticky; top: 0; z-index: 9999;
  background-color: #fff; border-bottom: 1px solid #eee;
  transition: background-color 0.3s ease, border-color 0.3s ease;
}

/* --------------------------------------------------------------------------
   3. SLIDE SWITCH
   -------------------------------------------------------------------------- */
#theme-toggle {
  position: relative;
  width: 56px; height: 28px;
  background: #87CEEB; /* Gündüz Mavisi */
  border-radius: 30px; border: none; cursor: pointer;
  margin-right: 15px; outline: none; padding: 0;
  display: flex; align-items: center;
  transition: background 0.4s ease;
}

#theme-toggle::after {
  content: '';
  position: absolute;
  top: 2px; left: 2px;
  width: 24px; height: 24px;
  border-radius: 50%;
  background: #FFD700;
  transition: transform 0.4s cubic-bezier(0.68, -0.55, 0.27, 1.55), background-color 0.4s ease, box-shadow 0.4s ease;
  box-shadow: 0 2px 4px rgba(0,0,0,0.2);
}

/* Dark Mode Aktifken (Hem HTML hem Body kontrolü) */
html.dark-mode #theme-toggle, 
body.dark-mode #theme-toggle {
  background: #2f3640;
}

html.dark-mode #theme-toggle::after, 
body.dark-mode #theme-toggle::after {
  transform: translateX(28px); 
  background-color: transparent; 
  box-shadow: inset -8px -2px 0 0px #ffffff; 
}

/* --------------------------------------------------------------------------
   4. DARK MODE (Renk Paleti)
   -------------------------------------------------------------------------- */
/* 'html.dark-mode body' seçicisini ekledik, böylece head scripti çalışacak */
html.dark-mode body,
body.dark-mode {
  --dm-bg: #121212;
  --dm-surface: #1e1e1e;
  --dm-border: #333333;
  --dm-text-main: #e0e0e0;
  --dm-text-muted: #a0a0a0;
  --dm-accent: #64b5f6;
  --dm-tag-bg: #2d2d2d;

  background-color: var(--dm-bg) !important;
  color: var(--dm-text-main) !important;

  a { color: inherit !important; text-decoration: none; }
  a:hover { color: var(--dm-accent) !important; text-decoration: underline; }
  
  h1, h2, h3, h4, h5, h6 { color: #fff !important; }

  /* Navbar */
  .masthead, .greedy-nav {
    background-color: var(--dm-surface) !important;
    border-bottom-color: var(--dm-border) !important;
  }
  .masthead__menu-item a { color: var(--dm-text-main) !important; }

  /* Sidebar */
  .sidebar {
    background-color: var(--dm-surface) !important;
    border-color: var(--dm-border) !important;
  }
  .author__name, .author__bio { color: var(--dm-text-main) !important; }

  /* Kartlar */
  .archive__item-teaser, .robust-grid-container .feature__item .archive__item {
    background-color: var(--dm-surface) !important;
    border-color: var(--dm-border) !important;
  }
  .archive__item-title a { color: inherit !important; }
  .archive__item-excerpt { color: var(--dm-text-muted) !important; }

  /* Diğer Elemanlar */
  .skill-tag { background-color: var(--dm-tag-bg) !important; color: var(--dm-text-main) !important; border-color: var(--dm-border) !important; }
  table { background-color: var(--dm-surface); color: var(--dm-text-main); }
  div.highlighter-rouge, figure.highlight { background-color: #2d2d2d !important; }
  code, kbd, pre, samp { background-color: #2d2d2d; color: #f8f8f2; border: none; }

  /* Footer & Search */
  .page__footer { background-color: #000000 !important; color: var(--dm-text-muted) !important; border-top: 1px solid var(--dm-border); }
  .page__footer a { color: var(--dm-text-main) !important; }
  .search-content { background-color: var(--dm-bg) !important; }
  .search-content input { background-color: var(--dm-surface) !important; color: #fff !important; border-color: var(--dm-border) !important; }
  .search-result__title a { color: var(--dm-accent) !important; }
}

/* Highlight Animasyonu */
mark.highlighted-term {
  background-color: #ffff00 !important; color: #000000 !important;
  padding: 0.1em 0.3em; border-radius: 3px;
  box-shadow: 0 0 10px rgba(255, 255, 0, 0.7);
  animation: pulseHighlight 2s infinite;
}
@keyframes pulseHighlight {
  0% { box-shadow: 0 0 0 0 rgba(255, 255, 0, 0.7); }
  70% { box-shadow: 0 0 0 10px rgba(255, 255, 0, 0); }
  100% { box-shadow: 0 0 0 0 rgba(255, 255, 0, 0); }
}