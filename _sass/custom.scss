/* ==========================================================================
   _sass/custom.scss - Efe V.B. Final (Avatar Border Fix)
   ========================================================================== */

/* --------------------------------------------------------------------------
   0. PRELOADER & TEMEL AYARLAR
   -------------------------------------------------------------------------- */
.preload, .preload *, .preload *::before, .preload *::after {
  transition: none !important; animation: none !important;
}

html { scroll-behavior: smooth; }

/* --------------------------------------------------------------------------
   1. OKUMA İLERLEME ÇUBUĞU (Ultra Smooth)
   -------------------------------------------------------------------------- */
#reading-progress-bar {
  position: fixed; top: 0; left: 0;
  width: 0%; 
  height: 3px; 
  background: linear-gradient(90deg, #007acc, #64b5f6); 
  z-index: 10000;
  transition: width 0.05s linear; 
  box-shadow: 0 1px 3px rgba(0, 122, 204, 0.3);
}

/* --------------------------------------------------------------------------
   2. YUKARI ÇIK BUTONU (Hassas & Belirgin)
   -------------------------------------------------------------------------- */
#scroll-to-top {
  position: fixed; bottom: 30px; right: 30px;
  width: 40px; height: 40px;
  
  /* LIGHT MODE */
  background-color: #ffffff;
  color: #333333;
  border: 1px solid #e0e0e0;
  
  border-radius: 50%;
  cursor: pointer; 
  opacity: 0; 
  visibility: hidden; 
  transform: translateY(10px); 
  
  transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
  z-index: 999;
  display: flex; align-items: center; justify-content: center;
  font-size: 1.1em; 
  box-shadow: 0 4px 12px rgba(0,0,0,0.15);
}

#scroll-to-top.show { 
  opacity: 1; visibility: visible; transform: translateY(0); 
}

#scroll-to-top:hover { 
  transform: translateY(-3px); 
  box-shadow: 0 6px 16px rgba(0,122,204,0.3);
  border-color: #007acc;
  color: #007acc;
}

/* --------------------------------------------------------------------------
   3. RESİM LIGHTBOX
   -------------------------------------------------------------------------- */
.lightbox-overlay {
  position: fixed; top: 0; left: 0; width: 100%; height: 100%;
  background: rgba(0, 0, 0, 0.85); z-index: 10001;
  display: flex; align-items: center; justify-content: center;
  opacity: 0; visibility: hidden; transition: all 0.3s ease;
  backdrop-filter: blur(5px);
}
.lightbox-overlay.active { opacity: 1; visibility: visible; }
.lightbox-overlay img {
  max-width: 90%; max-height: 90%;
  border-radius: 5px; box-shadow: 0 0 20px rgba(0,0,0,0.5);
  transform: scale(0.9); transition: transform 0.3s ease;
}
.lightbox-overlay.active img { transform: scale(1); }
.page__content img { cursor: zoom-in; transition: transform 0.2s; }
.page__content img:hover { transform: scale(1.01); }

/* --------------------------------------------------------------------------
   4. VS CODE TARZI KOD BLOKLARI
   -------------------------------------------------------------------------- */
div.highlighter-rouge {
  background-color: #1e1e1e !important; border-radius: 8px; margin: 1.5em 0;
  box-shadow: 0 10px 30px rgba(0,0,0,0.15); overflow: hidden; position: relative;
}
.code-header {
  background-color: #252526; padding: 8px 15px; display: flex; align-items: center; justify-content: space-between; border-bottom: 1px solid #333;
}
.code-controls { display: flex; gap: 6px; }
.code-dot { width: 12px; height: 12px; border-radius: 50%; }
.dot-red { background: #ff5f56; } .dot-yellow { background: #ffbd2e; } .dot-green { background: #27c93f; }
.copy-btn {
  background: transparent; border: 1px solid rgba(255,255,255,0.2); color: #ccc; font-size: 0.8em; padding: 2px 8px; border-radius: 4px; cursor: pointer; transition: all 0.2s;
}
.copy-btn:hover { background: rgba(255,255,255,0.1); color: #fff; border-color: #fff; }
div.highlighter-rouge pre.highlight { margin: 0; padding: 15px; background-color: transparent !important; border: none; }
div.highlighter-rouge code {
  font-family: 'Consolas', 'Monaco', 'Andale Mono', 'Ubuntu Mono', monospace !important;
  font-size: 0.9em; line-height: 1.6; color: #d4d4d4; background: transparent !important; border: none !important;
}

/* --------------------------------------------------------------------------
   5. MEVCUT SİSTEMLER
   -------------------------------------------------------------------------- */
.robust-grid-container {
  display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 25px; margin: 30px 0;
  .feature__item {
    margin: 0 !important; padding: 0 !important; max-width: 100% !important; flex: none !important;
    .archive__item {
      height: 100%; border: 1px solid #e1e4e8; border-radius: 8px; padding: 20px; background: #fff; display: flex; flex-direction: column; align-items: center; transition: box-shadow 0.3s ease, background-color 0.3s ease;
      &:hover { box-shadow: 0 10px 20px rgba(0,0,0,0.1); }
    }
    .archive__item-teaser { margin-bottom: 15px; i { color: #0056b3; } }
    .archive__item-title { text-align: center; font-size: 1.1em; margin-bottom: 15px; width: 100%; }
    .archive__item-body { width: 100%; text-align: center; }
  }
}
.sidebar { border: 1px solid transparent; border-radius: 4px; padding: 1em; transition: all 0.3s ease; }
.masthead { position: sticky; top: 0; z-index: 9999; background: #fff; border-bottom: 1px solid #eee; transition: all 0.3s ease; }
#theme-toggle {
  position: relative; width: 56px; height: 28px; background: #87CEEB; border-radius: 30px; border: none; cursor: pointer; margin-right: 15px; padding: 0; display: flex; align-items: center; transition: background 0.4s ease;
}
#theme-toggle::after {
  content: ''; position: absolute; top: 2px; left: 2px; width: 24px; height: 24px; border-radius: 50%; background: #FFD700; pointer-events: none; transition: transform 0.4s cubic-bezier(0.68,-0.55,0.27,1.55), background 0.4s, box-shadow 0.4s; box-shadow: 0 2px 4px rgba(0,0,0,0.2);
}

/* SUPER DARK MODE */
html.dark-mode body, body.dark-mode {
  --dm-bg: #121212; --dm-surface: #1e1e1e; --dm-border: #333333;
  --dm-text-main: #e0e0e0; --dm-text-muted: #a0a0a0; --dm-accent: #64b5f6; --dm-tag-bg: #2d2d2d;

  background-color: var(--dm-bg) !important; color: var(--dm-text-main) !important;
  a { color: inherit !important; text-decoration: none; }
  a:hover { color: var(--dm-accent) !important; text-decoration: underline; }
  h1, h2, h3, h4, h5, h6 { color: #fff !important; }

  .masthead, .greedy-nav { background-color: var(--dm-surface) !important; border-bottom-color: var(--dm-border) !important; }
  .masthead__menu-item a { color: var(--dm-text-main) !important; }
  .sidebar { background-color: var(--dm-surface) !important; border-color: var(--dm-border) !important; }
  .author__name, .author__bio { color: var(--dm-text-main) !important; }
  .archive__item-teaser, .robust-grid-container .feature__item .archive__item { background-color: var(--dm-surface) !important; border-color: var(--dm-border) !important; }
  .archive__item-title a { color: inherit !important; }
  .archive__item-excerpt { color: var(--dm-text-muted) !important; }
  .skill-tag { background-color: var(--dm-tag-bg) !important; color: var(--dm-text-main) !important; border-color: var(--dm-border) !important; }
  table { background-color: var(--dm-surface); color: var(--dm-text-main); }
  .page__footer { background-color: #000000 !important; color: var(--dm-text-muted) !important; border-top: 1px solid var(--dm-border); }
  .page__footer a { color: var(--dm-text-main) !important; }
  .search-content { background-color: var(--dm-bg) !important; }
  .search-content input { background-color: var(--dm-surface) !important; color: #fff !important; border-color: var(--dm-border) !important; }
  .search-result__title a { color: var(--dm-accent) !important; }

  /* Switch Dark Hali */
  #theme-toggle { background: #2f3640; }
  #theme-toggle::after { transform: translateX(28px); background: transparent; box-shadow: inset -8px -2px 0 0px #ffffff; }

  /* İkon Düzeltmeleri */
  .sidebar .author__urls li a, .page__footer a { color: var(--dm-text-main) !important; }
  .sidebar .author__urls i, .page__footer i, .sidebar svg, .page__footer svg { color: inherit !important; }
  .sidebar .author__urls li a:hover, .page__footer a:hover { color: var(--dm-accent) !important; }
  
  /* TOC Düzeltmeleri */
  .toc { background-color: var(--dm-surface) !important; border-color: var(--dm-border) !important; box-shadow: none !important; }
  .toc__title { color: var(--dm-text-main) !important; }
  .toc__menu a { color: var(--dm-text-muted) !important; }
  .toc__menu a:hover, .toc__menu a.is-active { color: var(--dm-accent) !important; }

  /* DARK MODE SCROLL BUTTON */
  #scroll-to-top {
    background-color: var(--dm-surface) !important;
    color: #ffffff !important;
    border-color: #444444 !important;
  }
  #scroll-to-top:hover {
    background-color: var(--dm-border) !important;
    border-color: var(--dm-accent) !important;
    color: var(--dm-accent) !important;
  }

  /* --- EKLENEN KISIM: PROFİL FOTOĞRAFI BORDER KALDIRMA --- */
  .author__avatar img {
    border: none !important;
    box-shadow: none !important; /* Varsa gölgeyi de temizle */
  }

  /* --- 9. BUTON VE UI TEXT DÜZELTMELERİ (DARK MODE FIX) --- */

  /* Sidebar "Follow/İletişim" Butonu - KESİN ÇÖZÜM */
  /* Hem normal modda hem dark modda okunabilir olması için */
  .author__urls-wrapper button.btn--inverse {
    background-color: #fff !important;      /* Arka plan bembeyaz */
    color: #000 !important;                 /* Yazı simsiyah */
    border: 1px solid #ccc !important;
    font-weight: bold;
  }

  /* Dark Mode açıldığında bozulmayı önle */
  html.dark-mode .author__urls-wrapper button.btn--inverse {
    background-color: #e0e0e0 !important;   /* Gözü almasın diye hafif gri */
    color: #1a1a1a !important;              /* Koyu siyah */
    box-shadow: 0 2px 5px rgba(0,0,0,0.5);  /* Derinlik kat */
  }

  /* Hover (Mouse ile üstüne gelince) */
  html.dark-mode .author__urls-wrapper button.btn--inverse:hover {
    background-color: #ffffff !important;
    color: #007acc !important;              /* Hoverda mavi olsun */
  }

  /* Toggle Menu (Hamburger) İkon Rengi */
  .greedy-nav__toggle .navicon {
    background: #333;
  }
  html.dark-mode .greedy-nav__toggle .navicon {
    background: #fff !important; /* Çizgiler beyaz olsun */
  }
  html.dark-mode .greedy-nav__toggle .navicon::before,
  html.dark-mode .greedy-nav__toggle .navicon::after {
    background: #fff !important;
  }
}
/* =========================================
   6. YAZDIRMA OPTİMİZASYONU (Print CSS)
   ========================================= */
@media print {
  /* Arka planı boşalt, mürekkep tasarrufu */
  body, html, .page__content, .masthead, .page__footer, .sidebar {
    background: #fff !important;
    color: #000 !important;
  }
  
  /* Gereksizleri gizle */
  #theme-toggle, #reading-progress-bar, #scroll-to-top, .greedy-nav__toggle, .search__toggle {
    display: none !important;
  }

  /* Kod blokları okunabilir olsun */
  div.highlighter-rouge {
    border: 1px solid #ccc;
    background: #f5f5f5 !important;
    color: #000 !important;
  }
  
  /* Linklerin nereye gittiğini parantez içinde göster (Akademik duruş) */
  a[href^="http"]:after {
    content: " (" attr(href) ")";
    font-size: 0.8em;
  }
}