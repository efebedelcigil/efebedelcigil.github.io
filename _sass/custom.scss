/* ==========================================================================
   _sass/custom.scss - Efe V.B. Final Style (Slide Switch + Fixes)
   ========================================================================== */

/* --------------------------------------------------------------------------
   1. ROBUST GRID SYSTEM (Kart Yapısı)
   -------------------------------------------------------------------------- */
.robust-grid-container {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 25px;
  margin-top: 30px;
  margin-bottom: 30px;

  .feature__item {
    margin: 0 !important;
    padding: 0 !important;
    max-width: 100% !important;
    flex: none !important;

    .archive__item {
      height: 100%;
      border: 1px solid #e1e4e8;
      border-radius: 8px;
      padding: 20px;
      background: #fff;
      transition: box-shadow 0.3s ease, background-color 0.3s ease;
      display: flex;
      flex-direction: column;
      align-items: center;

      &:hover {
        box-shadow: 0 10px 20px rgba(0,0,0,0.1);
      }
    }
    .archive__item-teaser { margin-bottom: 15px; i { color: #0056b3; } }
    .archive__item-title { text-align: center; font-size: 1.1em; margin-bottom: 15px; width: 100%; }
    .archive__item-body { width: 100%; text-align: center; }
  }
}

/* --------------------------------------------------------------------------
   2. YAN MENÜ (SIDEBAR) - KAYMA SORUNU ÇÖZÜMÜ
   -------------------------------------------------------------------------- */
.sidebar {
    /* KRİTİK DÜZELTME: */
    /* Light mode'da şeffaf sınır koyuyoruz ki Dark mode'a geçince genişlik değişmesin */
    border: 1px solid transparent; 
    border-radius: 4px;
    padding: 1em;
    transition: background-color 0.3s ease, border-color 0.3s ease;
}

/* --------------------------------------------------------------------------
   3. STICKY NAVBAR
   -------------------------------------------------------------------------- */
.masthead {
  position: -webkit-sticky;
  position: sticky;
  top: 0;
  z-index: 9999;
  background-color: #fff;
  border-bottom: 1px solid #eee;
  transition: all 0.3s ease-in-out;
}

/* --------------------------------------------------------------------------
   4. SLIDE SWITCH (Görseldeki Tasarım)
   -------------------------------------------------------------------------- */
#theme-toggle {
  position: relative;
  width: 60px;          /* Genişlik */
  height: 30px;         /* Yükseklik */
  background: #87CEEB;  /* Gündüz Mavisi (Varsayılan) */
  border-radius: 30px;  /* Hap şekli */
  border: none;
  cursor: pointer;
  margin-right: 15px;   /* Search butonuyla mesafe */
  outline: none;
  transition: background 0.5s ease;
  overflow: hidden;     /* Taşmaları gizle */
  padding: 0;
  display: flex;
  align-items: center;
}

/* Yuvarlak Hareketli Parça (Thumb) */
#theme-toggle::after {
  content: '';
  position: absolute;
  top: 3px;
  left: 3px;
  width: 24px;
  height: 24px;
  border-radius: 50%;
  background: #FFD700; /* Güneş Sarısı */
  transition: all 0.5s cubic-bezier(0.68, -0.55, 0.27, 1.55); /* Yaylanma efekti */
  box-shadow: 0 2px 5px rgba(0,0,0,0.2);
}

/* Dark Mode Aktifken Switch Hali */
body.dark-mode #theme-toggle {
  background: #2C3E50; /* Gece Mavisi */
}

body.dark-mode #theme-toggle::after {
  left: 33px; /* Sağa kaydır */
  background: transparent; /* Hilal yapmak için rengi kapatıyoruz */
  
  /* CSS İle Hilal Ay Çizimi (Box Shadow Tekniği) */
  box-shadow: 6px -3px 0 2px #ffffff; 
  /* Bu gölge, şeffaf yuvarlağın sağ üstüne beyaz bir hilal düşürür */
}

/* Butonun üzerine gelince (Hover) */
#theme-toggle:hover {
  opacity: 0.9;
}

/* --------------------------------------------------------------------------
   5. SUPER DARK MODE (Renk Paleti)
   -------------------------------------------------------------------------- */
body.dark-mode {
  --dm-bg: #121212;
  --dm-surface: #1e1e1e;
  --dm-border: #333333;
  --dm-text-main: #e0e0e0;
  --dm-text-muted: #a0a0a0;
  --dm-accent: #64b5f6;
  --dm-tag-bg: #2d2d2d;

  background-color: var(--dm-bg) !important;
  color: var(--dm-text-main) !important;

  a { color: var(--dm-accent); &:hover { color: #fff; } }
  h1, h2, h3, h4, h5, h6 { color: #fff !important; }

  /* Navbar */
  .masthead {
    background-color: var(--dm-surface) !important;
    border-bottom-color: var(--dm-border) !important;
  }
  .masthead__menu-item a { color: var(--dm-text-main) !important; &:hover { color: var(--dm-accent) !important; } }

  /* Sidebar (Artık kaymayacak) */
  .sidebar {
    background-color: var(--dm-surface) !important;
    border-color: var(--dm-border) !important; /* Rengi burada veriyoruz */
  }
  .author__name, .author__bio { color: var(--dm-text-main) !important; }

  /* Kartlar */
  .archive__item-teaser, .robust-grid-container .feature__item .archive__item {
    background-color: var(--dm-surface) !important;
    border-color: var(--dm-border) !important;
  }
  .archive__item-title a { color: var(--dm-text-main) !important; }
  .archive__item-excerpt { color: var(--dm-text-muted) !important; }

  /* Etiketler, Tablolar, Kodlar */
  .skill-tag { background-color: var(--dm-tag-bg) !important; color: var(--dm-text-main) !important; border-color: var(--dm-border) !important; }
  table { background-color: var(--dm-surface); color: var(--dm-text-main); }
  div.highlighter-rouge, figure.highlight { background-color: #2d2d2d !important; }
  code, kbd, pre, samp { background-color: #2d2d2d; color: #f8f8f2; border: none; }

  /* Footer & Search */
  .page__footer { background-color: #000000 !important; color: var(--dm-text-muted) !important; border-top: 1px solid var(--dm-border); }
  .page__footer a { color: var(--dm-text-main) !important; }
  .search-content { background-color: var(--dm-bg) !important; }
  .search-content input { background-color: var(--dm-surface) !important; color: #fff !important; border-color: var(--dm-border) !important; }
  .search-result__title a { color: var(--dm-accent) !important; }
}

/* 6. Highlight Animasyonu */
mark.highlighted-term {
  background-color: #ffff00 !important; color: #000000 !important;
  padding: 0.1em 0.3em; border-radius: 3px;
  box-shadow: 0 0 10px rgba(255, 255, 0, 0.7);
  animation: pulseHighlight 2s infinite;
}
@keyframes pulseHighlight {
  0% { box-shadow: 0 0 0 0 rgba(255, 255, 0, 0.7); }
  70% { box-shadow: 0 0 0 10px rgba(255, 255, 0, 0); }
  100% { box-shadow: 0 0 0 0 rgba(255, 255, 0, 0); }
}